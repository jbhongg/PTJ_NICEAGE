{"remainingRequest":"C:\\worksapce\\S05P13B202\\backend\\frontend\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!C:\\worksapce\\S05P13B202\\backend\\frontend\\src\\views\\contents\\community\\components\\comment.vue?vue&type=style&index=0&id=d55113e0&scoped=true&lang=css","dependencies":[{"path":"C:\\worksapce\\S05P13B202\\backend\\frontend\\src\\views\\contents\\community\\components\\comment.vue","mtime":1629269209814},{"path":"C:\\worksapce\\S05P13B202\\backend\\frontend\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\worksapce\\S05P13B202\\backend\\frontend\\node_modules\\vue-loader-v16\\dist\\stylePostLoader.js","mtime":1628298225000},{"path":"C:\\worksapce\\S05P13B202\\backend\\frontend\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\worksapce\\S05P13B202\\backend\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\worksapce\\S05P13B202\\backend\\frontend\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1628298225000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQogIC5lbC1idXR0b24gew0KICAgIG1hcmdpbjogMTVweDsNCiAgICB3aWR0aDogMTUwcHg7DQogICAgaGVpZ2h0OiA1MHB4Ow0KICAgIGJhY2tncm91bmQ6ICNFQkM4NkYgIWltcG9ydGFudDsNCiAgICBib3JkZXItcmFkaXVzOiAyNXB4ICFpbXBvcnRhbnQ7DQogIH0NCg=="},{"version":3,"sources":["C:\\worksapce\\S05P13B202\\backend\\frontend\\src\\views\\contents\\community\\components\\comment.vue"],"names":[],"mappings":";EAsME,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;IACT,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;IACZ,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;IACZ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;IACZ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IAC9B,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EAChC","file":"C:/worksapce/S05P13B202/backend/frontend/src/views/contents/community/components/comment.vue","sourceRoot":"","sourcesContent":["<template>\r\n    <el-form-item>\r\n                  <el-input placeholder=\"댓글을 작성해주세요.\" v-model=\"state.form.commentContents\"></el-input>\r\n    </el-form-item>\r\n    <el-form-item >\r\n      <div>{{boardId}}</div>\r\n    <el-button @click=\"clickWriteComment\"> 댓글 달기</el-button>\r\n    </el-form-item>\r\n    <br>\r\n    \r\n    <!--   state.commentform.commentsDto   -->\r\n    <el-table\r\n    :show-header =false\r\n    :data=\"pagedTableData\" \r\n    style=\"width: 100%\"\r\n    @current-change=\"handleCurrentChange\">\r\n    <el-table-column\r\n      prop=\"userName\"\r\n      width=\"180\">\r\n    </el-table-column>\r\n    <el-table-column\r\n      prop=\"commentContents\"\r\n      width=\"180\">\r\n    </el-table-column>\r\n     <!-- <div v-if=\"state.commentList.userId=state.form.userId\"> -->\r\n    <el-table-column v-if=\"state.commentList.userId=state.form.userId\"> <!--v-if 사용해서 댓글쓴사람 == 현재 로그인된 사람 일때만 보여주기-->\r\n           \r\n              <el-button @click=\"clickModifyComment\" type=\"danger\">수정</el-button>\r\n            </el-table-column>\r\n    <el-table-column v-if=\"state.commentList.userId=state.form.userId\">\r\n              <el-button @click=\"clickDeleteComment\" type=\"danger\">삭제</el-button>\r\n    </el-table-column>\r\n    <!-- </div> -->\r\n  </el-table>\r\n \r\n   <!-- 페이지네이션\r\n      <el-pagination\r\n      background\r\n      :page-size=\"pageSize\"\r\n      layout=\" prev, pager, next\"\r\n      :total=\"state.commentform.commentsDto.length\"\r\n      @current-change=\"setPage\"> \r\n    </el-pagination>\r\n     페이지네이션 끝 -->\r\n\r\n</template>\r\n\r\n<script>\r\nimport { reactive, computed } from 'vue'\r\nimport { useStore } from 'vuex'\r\n// import { useRouter } from 'vue-router'\r\n\r\n\r\nexport default {\r\nprops: {\r\n      boardId : {\r\n        type : Number,\r\n        default : 0,\r\n      },\r\n      commentsDto : { // 객체 배열\r\n        type : Array,\r\n      },\r\n      titles : { // 객체 배열\r\n        type : Array,\r\n      }\r\n\r\n},\r\n\r\nsetup(props) {\r\n    // const router = useRouter()\r\n    const store = useStore()\r\n    const state = reactive({\r\n\r\n      page: 1,\r\n      pageSize: 4,\r\n      currentRow: null,\r\n      \r\n      \r\n\r\n      commentList :props.commentsDto, // 댓글 받아온거 (배열임)\r\n      commentWriter : props.commentsDto.userId, // 댓글 작성자 (배열임)\r\n      commentId :'',\r\n      form : {\r\n       userId : store.getters['root/getMyId'],\r\n       boardId : props.boardId,\r\n       commentContents : '', // v-model로 입력받음\r\n       // commentId :'', 자동 증가?\r\n\r\n      }, // 댓글 입력시 보낼 입력폼\r\n      commentform : {\r\n        commentsDto:[],\r\n        user:{},\r\n      }, // 댓글 받아오는 폼\r\n\r\n\r\n      pagedTableData :computed(() => state.commentform.commentsDto.slice(state.pageSize * state.page - state.pageSize, state.pageSize * state.page),\r\n      ),\r\n    })\r\n\r\n      \r\n\r\n      console.log(\"보드 아이디\");\r\n      console.log(state.form.boardId);\r\n      \r\n\r\n\r\n       const setPage= function (val) {\r\n        state.page = val\r\n    }\r\n\r\n     const handleCurrentChange = function (val) {\r\n        state.currentRow = val;\r\n   \r\n          state.commentId = val.commentId \r\n    }\r\n\r\n\r\n    console.log(\"PTD\");\r\n      console.log(state.pagedTableData);\r\n\r\n\r\n\r\n      store.dispatch('root/requestReadBoard',{boardId : state.form.boardId }) // #{state.boardId} // userId : userId, //  `{boardId}?boardId=${state.boardId}`\r\n     .then(res => {\r\n      // console.log(res.data);\r\n      // console.log(res.data.data);\r\n      state.commentform = res.data.data; // form에다가 백에서 받아온 값들 넣어주자.\r\n      // console.log(state.form.user.userName);\r\n      // console.log(state.form.boardTitle);\r\n      // console.log(state.form.boardContents);\r\n      // console.log(state.form.boardDate);\r\n      console.log(state.commentform.commentsDto); \r\n      // console.log(state.nowuserId);\r\n      // console.log(state.form.user.userId);\r\n     \r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      })\r\n  \r\n  // console.log(props.title);\r\n\r\n  // console.log(props.boardId);\r\n  // console.log(state.form.boardId);\r\n  console.log(\"커멘트디티오\");\r\n  console.log(props.commentsDto); \r\n  console.log(state.commentList); \r\n  console.log(props.commentsDto.userName);\r\n  console.log(\"타이틀\");\r\n  console.log(props.titles);\r\n   console.log(\"댓글 작성자\");\r\n  console.log(props.commentsDto.userId); \r\n\r\n\r\n  \r\n    const clickWriteComment= () => {\r\n      store.dispatch('root/requestSubmitComment', state.form)\r\n      .then(result =>{\r\n        console.log(result)\r\n          state.form.commentContents='';\r\n          state.commentList = props.commentsDto;\r\n           console.log(\"댓글 입력후\"); \r\n          console.log(state.commentList); \r\n\r\n        //   router.push({       \r\n        //   name: 'BoardDetail',\r\n        // })\r\n        console.log()\r\n      })\r\n       .catch((err) => {\r\n            store.commit('root/loadingOff')\r\n            alert(err)\r\n          })\r\n    }\r\n const clickModifyComment= () =>{\r\n    store.dispatch('root/requestUpdateComment',state.form) // state.form에 넣을 것 : ~~~\r\n       .then(result =>{\r\n        console.log(result)\r\n\r\n      })\r\n }\r\n\r\n\r\n const clickDeleteComment= () =>{\r\n      const userId = store.getters['root/getMyId']\r\n         store.dispatch('root/requestDeleteComment',{userId : userId, boardId : state.form.boardId, commentId : state.commentId}) // `{boardId}?boardId=${state.form.boardId}` // \r\n       .then(result =>{\r\n        console.log(result)\r\n        \r\n      })\r\n }\r\n\r\n  return {state,clickWriteComment, clickModifyComment, clickDeleteComment,setPage,handleCurrentChange}\r\n}\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n  .el-button {\r\n    margin: 15px;\r\n    width: 150px;\r\n    height: 50px;\r\n    background: #EBC86F !important;\r\n    border-radius: 25px !important;\r\n  }\r\n</style>"]}]}